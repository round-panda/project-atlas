---
import Layout from '../layouts/Layout.astro';
import CtaBanner from '../components/CtaBanner.astro';
import { site } from '../data/site.js';
import { teams } from '../data/teams.js';
import { url } from '../utils/url.js';

// Typewriter phrases — update to match your actual team disciplines
const typewriterPhrases = [
  'Robotics',
  'Computer Science',
  'Mechanical Design',
  'Aerospace',
  'Electronics',
  'Environmental Engineering',
  'Racers',
];
---

<Layout title="Home">

  <!-- ─── HERO ─────────────────────────────────────────────── -->
  <section id="hero" class="hero">

    <!-- Geometric ring decorations -->
    <div class="geo-ring hero-ring-1" aria-hidden="true"></div>
    <div class="geo-ring hero-ring-2" aria-hidden="true"></div>
    <div class="geo-ring hero-ring-3" aria-hidden="true"></div>

    <!-- Vertical guide lines -->
    <div class="container hero-grid">

      <!-- Left column: copy -->
      <div class="hero-copy">
        <div class="badge badge-crimson reveal">
          <span class="badge-dot"></span>
          {site.district}
        </div>

        <h1 class="hero-headline reveal" style="transition-delay:0.1s;">
          Engineering<br />
          <span class="hero-headline-muted">the&nbsp;</span>Future<span class="hero-headline-accent">.</span>
        </h1>

        <p class="hero-sub reveal" style="transition-delay:0.2s;">
          Six engineering teams. One unified coalition. Advancing student
          representation in the {site.districtShort}.
        </p>

        <!-- Typewriter -->
        <div class="hero-typewriter reveal" style="transition-delay:0.28s;">
          We are &mdash;&nbsp;
          <span id="typewriter-target"></span>
          <span class="cursor"></span>
          <!-- Data picked up by main.js -->
          <span
            id="typewriter-data"
            hidden
            data-phrases={JSON.stringify(typewriterPhrases)}
          ></span>
        </div>

        <div class="reveal" style="display:flex; gap:14px; flex-wrap:wrap; transition-delay:0.36s;">
          <a href={url('/purpose')} class="btn btn-crimson">Our Mission</a>
          <a href={url('/join')}    class="btn btn-outline-light">Join Atlas</a>
        </div>

        <!-- Scroll cue -->
        <div class="hero-scroll-cue reveal" style="transition-delay:0.44s;" aria-hidden="true">
          <div class="hero-scroll-line"></div>
          <span>Scroll to explore</span>
        </div>
      </div>

      <!-- Right column: decorative number -->
      <div class="hero-deco reveal-right" style="transition-delay:0.15s;" aria-hidden="true">
        <div class="hero-deco-number">06</div>
        <div class="hero-deco-label">Engineering Teams</div>
      </div>

    </div>

    <!-- Angled bottom edge -->
    <div class="hero-angle-bottom" aria-hidden="true"></div>
  </section>


  <!-- ─── STATS BAR ─────────────────────────────────────────── -->
  <section class="section-tight">
    <div class="container">
      <div class="stats-grid">

        <div class="stat-cell">
          <div class="stat-value" style="color:var(--navy);">
            <span class="counter" data-target="6">0</span>
          </div>
          <div class="stat-label">Engineering Teams</div>
        </div>

        <div class="stat-cell">
          <!-- REPLACE: update student count in src/data/site.js -->
          <div class="stat-value" style="color:var(--navy);">
            <span class="counter" data-target={site.studentsRepresented}>0</span>
            <span class="stat-plus">+</span>
          </div>
          <div class="stat-label">Students Represented</div>
        </div>

        <div class="stat-cell">
          <div class="stat-value" style="color:var(--crimson);">1</div>
          <div class="stat-label">Unified Voice</div>
        </div>

        <div class="stat-cell">
          <div class="stat-value stat-value-sm" style="color:var(--green);">
            {site.districtShort}
          </div>
          <div class="stat-label">School District</div>
        </div>

      </div>
    </div>
  </section>

  <div class="divider"></div>


  <!-- ─── WHAT IS ATLAS ─────────────────────────────────────── -->
  <section class="section">
    <div class="container">
      <div class="two-col">

        <!-- Text side -->
        <div class="reveal-left">
          <div class="section-label">What Is Atlas</div>
          <h2 class="section-title">A Coalition Built for the Future</h2>
          <p class="section-sub" style="margin-bottom:36px;">
            Project Atlas is a first-of-its-kind umbrella organization merging
            six engineering and STEM teams across {site.districtShort}. Together,
            we advocate for students at the board level and open doors for the
            next generation of engineers.
          </p>

          <!-- Feature list -->
          <div class="feature-list">
            <div class="feature-item accent-bar">
              <div class="icon-box">
                <svg viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
              </div>
              <div>
                <h4 class="feature-title">TCUSD Campaign</h4>
                <p class="feature-desc">A collaboration between students and  {site.districtShort} Board of Education.</p>
              </div>
            </div>
            <div class="feature-item accent-bar">
              <div class="icon-box icon-box-green">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
              </div>
              <div>
                <h4 class="feature-title">Shared Resources</h4>
                <p class="feature-desc">Coalition budget leverage, mentors, and cross-team collaboration.</p>
              </div>
            </div>
            <div class="feature-item accent-bar">
              <div class="icon-box icon-box-crimson">
                <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              </div>
              <div>
                <h4 class="feature-title">Community Growth</h4>
                <p class="feature-desc">Welcoming families and students to a district that invests in tomorrow.</p>
              </div>
            </div>
          </div>

          <div style="margin-top:32px;">
            <a href={url('/purpose')} class="btn btn-outline">Read Our Purpose &rarr;</a>
          </div>
        </div>

        <!-- Photo / visual side -->
        <div class="reveal-right" style="position:relative;">
          <div class="photo-frame">
            <div class="corner-mark tl"></div>
            <div class="corner-mark br"></div>
            <!--
              REPLACE: swap this placeholder with a real team photo:
              <img src={url('/assets/images/team-photo.jpg')} alt="Project Atlas team" />
            -->
            <div class="photo-placeholder">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="rgba(238,241,247,0.2)" stroke-width="1">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <path d="M3 9h18M9 21V9"/>
              </svg>
              <span>Replace with team photo</span>
            </div>
          </div>
          <div class="photo-accent photo-accent-br" aria-hidden="true"></div>
          <div class="photo-accent photo-accent-tl" aria-hidden="true"></div>
        </div>

      </div>
    </div>
  </section>

  <div class="divider"></div>


  <!-- ─── TEAMS PREVIEW ─────────────────────────────────────── -->
  <section class="section" style="background:var(--bg-2);">
    <div class="container">

      <div class="section-header-split">
        <div class="reveal">
          <div class="section-label">The Six Teams</div>
          <h2 class="section-title" style="margin-bottom:0;">Engineering Disciplines United</h2>
        </div>
        <a href={url('/teams')} class="btn btn-outline reveal" style="flex-shrink:0; transition-delay:0.1s;">
          View All Teams &rarr;
        </a>
      </div>

      <!-- REPLACE: team names and descriptions live in src/data/teams.js -->
      <div class="stagger teams-preview-grid">
        {teams.map((team, i) => (
          <div class={`teams-preview-cell top-border-${team.accentColor}`}>
            <div class={`teams-preview-num teams-preview-num-${team.accentColor}`}>
              {team.number}
            </div>
            <h3 class="teams-preview-name">{team.name}</h3>
            <p class="teams-preview-desc">{team.description}</p>
          </div>
        ))}
      </div>

    </div>
  </section>

  <div class="divider"></div>


  <!-- ─── CTA ──────────────────────────────────────────────── -->
  <CtaBanner
    badge="Open to All Students"
    title="Ready to Shape Your District's Future?"
    subtitle="Whether you're a student engineer, a prospective family, or someone who believes in student advocacy — Project Atlas has a place for you."
    primaryHref={url('/join')}
    primaryLabel="Get Involved"
    secondaryHref={url('/contact')}
    secondaryLabel="Contact Us"
  />

</Layout>


<style>
  /* ── Hero ── */
  .hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    padding-top: var(--nav-h);
    background: var(--navy);
  }

  .hero-ring-1 { width:640px; height:640px; top:50%; right:-220px; transform:translateY(-50%); }
  .hero-ring-2 { width:400px; height:400px; top:50%; right:-60px; transform:translateY(-50%); border-color:rgba(160,24,48,0.15); }
  .hero-ring-3 { width:200px; height:200px; top:50%; right:80px; transform:translateY(-50%); border-color:rgba(45,90,69,0.2); }

  .hero-grid {
    padding-top: 60px;
    padding-bottom: 100px;
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 60px;
  }

  .hero-copy { max-width: 640px; }

  .hero-headline {
    font-family: var(--font-display);
    font-size: clamp(2.6rem, 9vw, 8rem);
    font-weight: 800;
    line-height: 1.0;
    letter-spacing: -0.03em;
    color: #fff;
    margin-bottom: 24px;
  }
  
  .hero-headline-muted  { color: rgba(238,241,247,0.35); }
  .hero-headline-accent { color: var(--crimson); }

  .hero-sub {
    font-size: 1.1rem;
    color: rgba(238,241,247,0.62);
    max-width: 500px;
    margin-bottom: 14px;
    line-height: 1.78;
  }

  .hero-typewriter {
    font-family: var(--font-display);
    font-size: 0.7rem;
    letter-spacing: 0.12em;
    color: rgba(238,241,247,0.45);
    margin-bottom: 44px;
  }
  #typewriter-target { color: rgba(238,241,247,0.85); font-weight: 600; }
  .cursor { background: rgba(238,241,247,0.6); }

  .hero-scroll-cue {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 52px;
    opacity: 0.4;
  }
  .hero-scroll-line {
    width: 32px;
    height: 1px;
    background: rgba(255,255,255,0.4);
  }
  .hero-scroll-cue span {
    font-family: var(--font-display);
    font-size: 0.52rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: rgba(238,241,247,0.6);
  }

  .hero-deco { text-align: right; user-select: none; }
  .hero-deco-number {
    font-family: var(--font-display);
    font-size: clamp(5rem, 10vw, 9rem);
    font-weight: 800;
    line-height: 1;
    letter-spacing: -0.04em;
    color: transparent;
    -webkit-text-stroke: 1px rgba(255,255,255,0.08);
  }
  .hero-deco-label {
    font-family: var(--font-display);
    font-size: 0.6rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: rgba(238,241,247,0.25);
    margin-top: 8px;
  }

  .hero-angle-bottom {
    position: absolute;
    bottom: -1px; left: 0; right: 0;
    height: 72px;
    background: var(--bg);
    clip-path: polygon(0 100%, 100% 0, 100% 100%);
  }

  /* ── Stats ── */
  .section-tight { padding: 72px 0; background: var(--bg); }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }
  .stat-cell {
    padding: 36px 28px;
    text-align: center;
    background: var(--bg-card);
    border-right: 1px solid var(--border);
  }
  .stat-cell:last-child { border-right: none; }
  .stat-plus { font-size: 1.8rem; }
  .stat-label {
    font-family: var(--font-display);
    font-size: 0.55rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-top: 10px;
  }
  .stat-value-sm { font-size: 1.2rem; font-family: var(--font-display); font-weight: 800; letter-spacing: -0.02em; }

  /* ── Two-column layout ── */
  .two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }

  /* ── Feature list ── */
  .feature-list {
    display: flex;
    flex-direction: column;
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }
  .feature-item {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    padding: 22px 24px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
  }
  .feature-item:last-child { border-bottom: none; }
  .feature-item .icon-box { margin-bottom: 0; flex-shrink: 0; }
  .feature-title {
    font-family: var(--font-display);
    font-size: 0.82rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    margin-bottom: 5px;
  }
  .feature-desc { color: var(--text-muted); font-size: 0.88rem; }

  /* ── Photo frame ── */
  .photo-frame {
    position: relative;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border);
  }
  .photo-placeholder {
    aspect-ratio: 4/3;
    background: var(--navy);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }
  .photo-placeholder span {
    font-family: var(--font-display);
    font-size: 0.52rem;
    letter-spacing: 0.2em;
    color: rgba(238,241,247,0.2);
    text-transform: uppercase;
  }
  .photo-accent {
    position: absolute;
    border-radius: var(--radius-lg);
    z-index: -1;
  }
  .photo-accent-br {
    bottom: -20px; right: -20px;
    width: 120px; height: 120px;
    background: var(--crimson);
    opacity: 0.12;
  }
  .photo-accent-tl {
    top: -16px; left: -16px;
    width: 80px; height: 80px;
    background: var(--green);
    border-radius: 50%;
    opacity: 0.10;
  }

  /* ── Section header with split layout ── */
  .section-header-split {
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    margin-bottom: 56px;
    gap: 24px;
    flex-wrap: wrap;
  }

  /* ── Teams preview grid ── */
  .teams-preview-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }
  .teams-preview-cell {
    background: var(--bg-card);
    padding: 28px 24px;
    border-right: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
  }
  .teams-preview-cell:nth-child(3n) { border-right: none; }
  .teams-preview-cell:nth-child(n+4) { border-bottom: none; }

  .teams-preview-num {
    font-family: var(--font-display);
    font-size: 2.4rem;
    font-weight: 800;
    line-height: 1;
    margin-bottom: 16px;
    letter-spacing: -0.04em;
  }
  .teams-preview-num-navy    { color: rgba(27,42,74,0.07); }
  .teams-preview-num-crimson { color: rgba(160,24,48,0.07); }
  .teams-preview-num-green   { color: rgba(45,90,69,0.07); }

  .teams-preview-name {
    font-family: var(--font-display);
    font-size: 0.88rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    margin-bottom: 8px;
  }
  .teams-preview-desc {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.65;
  }

  /* ── Responsive ── */
  @media (max-width: 900px) {
    .hero-deco { display: none; }
    .hero-grid {
      grid-template-columns: 1fr;
      padding-top: 40px;
      padding-bottom: 80px;
    }
    .hero-copy { max-width: 100%; }
    .two-col {
      grid-template-columns: 1fr;
      gap: 40px;
    }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .stat-cell:nth-child(2) { border-right: none; }
    .stat-cell:nth-child(3) { border-bottom: none; }
    .teams-preview-grid { grid-template-columns: repeat(2, 1fr); }
    .teams-preview-cell:nth-child(3n) { border-right: 1px solid var(--border); }
    .teams-preview-cell:nth-child(2n) { border-right: none; }
    .teams-preview-cell:nth-child(n+4) { border-bottom: 1px solid var(--border); }
    .teams-preview-cell:nth-child(n+5) { border-bottom: none; }
  }

  @media (max-width: 640px) {
    .hero {
      min-height: calc(100svh - 0px);
      align-items: flex-start;
      padding-top: calc(var(--nav-h) + 32px);
    }
    .hero-grid {
      padding-top: 20px;
      padding-bottom: 60px;
      gap: 32px;
    }
    .hero-headline { font-size: clamp(1.75rem, 9.7vw, 3.2rem); margin-bottom: 18px; }
    .hero-sub { font-size: 1rem; }
    .hero-scroll-cue { display: none; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .stat-cell { padding: 24px 16px; }
    .stat-value { font-size: 2.2rem; }
    .teams-preview-grid { grid-template-columns: 1fr; }
    .teams-preview-cell { border-right: none !important; border-bottom: 1px solid var(--border) !important; }
    .teams-preview-cell:last-child { border-bottom: none !important; }
    .section-tight { padding: 48px 0; }
    .section-header-split { flex-direction: column; align-items: flex-start; }
    .photo-accent { display: none; }
  }
</style>
