---
import Layout from '../layouts/Layout.astro';
import PageHero from '../components/PageHero.astro';
import { site } from '../data/site.js';

const steps = [
  {
    num: '01',
    title: 'Indicate',
    desc: 'Share your interest by completing the form below or reach out via the Contact page. You will be added to the mailing list.', 
  },
  {
    num: '02',
    title: 'Integrate',
    desc: 'Meet your Mariners, address questions and concerns. We\'ll notify you — info sessions and tryouts will be scheduled at the start of the school year at each teams\' discretion. You should be enrolled or awaiting enrollment in the school the team is based in.', 
  },
  {
    num: '03',
    title: 'Inaugurate',
    desc: 'Begin your journey and assimilate with likeminded talent optimized based on team compatibility.', 
  },
  {
    num: '04',
    title: 'Innovate',
    desc: 'Compete and represent your vision.',
  },
];

const benefits = [
  {
    title: 'Real Engineering Experience',
    desc: 'Build physical and software systems that compete at regional, national, and international levels.',
    accentColor: 'navy',
    icon: `<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>`,
  },
  {
    title: 'College Application Edge',
    desc: 'Board representation, competition wins, and leadership roles stand out on applications.',
    accentColor: 'crimson',
    icon: `<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>`,
  },
  {
    title: 'Mentorship Network',
    desc: 'Industry mentors, alumni engineers, and a community that grows with you beyond graduation.',
    accentColor: 'green',
    icon: `<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>`,
  },
];

const districtStats = [
  { value: '8', label: 'School Sites',      color: 'var(--navy)' },
  { value: '5246', label: 'Total Students',    color: 'var(--navy)' },
  { value: '70+', label: 'Years Established', color: 'var(--green)' },
  { value: '99.6%', label: 'Graduation Rate', color: 'var(--crimson)' },
];
const faqs = [
  {
    q: 'What grades are eligible for Atlas teams?',
    a: 'Grades are not accounted for.  The tryout process is led by students; we don\'t have access to your grades.',
  },
  {
    q: 'Is there a cost to participate?',
    a: 'Costs vary by team and are usually for the team shirt or personal travel. Consult us or the team for estimates.',
  },
  {
    q: 'How do I enroll in TCUSD?',
    a: `<a href="${site.links.enrollment}">See the TCUSD website for more info.</a>`,
  },
];

const familyBullets = [
  'Award-winning engineering and STEM programs across all grade levels.',
  'Student voice in district decisions through Atlas\'s board representation program.',
  'A welcoming, diverse community in the heart of the San Gabriel Valley.',
  'Strong college placement record with dedicated university prep resources.',
];

// ─────────────────────────────────────────────────────────────────────────────
---

<Layout
  title="Join"
  description="Join Project Atlas — opportunities for students and families in Temple City Unified School District."
>

  <PageHero
    badge="Enrollment Open"
    badgeColor="green"
    title="Join the Atlas Coalition"
    subtitle="For students ready to engineer the future — and families choosing the right district for their children."
  />


  <section class="section">
    <div class="container">

      <div class="reveal tab-bar">
        <button class="tab-btn active" data-tab="students">For Students</button>
        <button class="tab-btn" data-tab="parents">For Parents &amp; Families</button>
      </div>

      <div id="tab-students" class="tab-panel active">
        <div class="two-col-wide">

          <div>
            <div class="section-label">Student Pathway</div>
            <h2 class="section-title">How to Get Involved</h2>
            <p class="section-sub" style="margin-bottom:48px;">
              You don't need prior experience — just curiosity and commitment. Here's
              the path from aspiring student to Atlas Mariner.
            </p>

            <div class="atlas-steps">
              {steps.map(({ num, title, desc }, i) => (
                <div class={`atlas-step ${i < steps.length - 1 ? 'has-connector' : ''}`}>
                  <div class={`atlas-step-num ${i === steps.length - 1 ? 'atlas-step-num-final' : ''}`}>
                    {num}
                  </div>
                  <div class="atlas-step-body">
                    <h4 class="atlas-step-title">{title}</h4>
                    <p class="atlas-step-desc">{desc}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>

          <div class="benefits">
            {benefits.map(({ title, desc, accentColor, icon }, i) => (
              <div class={`card top-border-${accentColor} reveal-right`} style={`transition-delay:${i * 0.1}s`}>
                <div class={`icon-box ${accentColor !== 'navy' ? `icon-box-${accentColor}` : ''}`} style="margin-bottom:14px;">
                  <svg viewBox="0 0 24 24" set:html={icon} />
                </div>
                <h4 class="benefit-title">{title}</h4>
                <p class="benefit-desc">{desc}</p>
              </div>
            ))}
          </div>

        </div>
      </div>

      <div id="tab-parents" class="tab-panel">
        <div class="two-col-wide">

          <div>
            <div class="section-label green">For Families</div>
            <h2 class="section-title">Why Choose Temple City?</h2>
            <p class="section-sub" style="margin-bottom:32px;">
              Temple City Unified School District is home California's most active STEM programs.
              Project Atlas is proof that this community invests in its students.
            </p>
            <ul class="family-bullets">
              {familyBullets.map((bullet) => (
                <li>
                  <span class="bullet-dot" aria-hidden="true"></span>
                  <p>{bullet}</p>
                </li>
              ))}
            </ul>
            <a href={site.links.enrollment} target="_blank" class="btn btn-green">
              {site.districtShort} Enrollment Info &rarr;
            </a>
          </div>

          <div class="family-cards">
            <div class="card top-border-navy">
              <h4 class="card-label">District At a Glance</h4>
              <div class="district-stats">
                {districtStats.map(({ value, label, color }) => (
                  <div>
                    <div class="district-stat-value" style={`color:${color}`}>{value}</div>
                    <div class="district-stat-label">{label}</div>
                  </div>
                ))}
              </div>
            </div>

            <div class="card">
              <h4 class="card-label">Frequently Asked</h4>
              <div class="faq-list">
                {faqs.map(({ q, a }, i) => (
                  <div class={i > 0 ? 'faq-item' : ''}>
                    <p class="faq-q">{q}</p>
                    <p class="faq-a" set:html={a}/>
                  </div>
                ))}
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </section>

  <div class="divider"></div>

  <section class="section" style="background:var(--bg-2);">
    <div class="container">
      <div class="form-wrap">

        <div class="reveal text-center" style="margin-bottom:48px;">
          <div class="section-label" style="justify-content:center;">Get Started</div>
          <h2 class="section-title">Express Your Interest</h2>
          <p class="section-sub" style="margin:0 auto;">
            Fill this out and a Mariner will follow up with next
            steps within 2 business days.
          </p>
        </div>

        <form
          id="interest-form"
          class="reveal"
          style="transition-delay:0.1s;"
          action={site.formAction ?? undefined}
        >
          <div class="form-row">
            <div class="form-field">
              <label>First Name</label>
              <input type="text" name="firstName" placeholder="Jane" required />
            </div>
            <div class="form-field">
              <label>Last Name</label>
              <input type="text" name="lastName" placeholder="Smith" required />
            </div>
          </div>

          <div class="form-field">
            <label>Email</label>
            <input type="email" name="email" placeholder="jane@example.com" required />
          </div>

          <div class="form-field">
            <label>I am a...</label>
            <select name="role" required>
              <option value="">Select one</option>
              <option>Current TCUSD Student</option>
              <option>Prospective Student</option>
              <option>Parent / Guardian</option>
              <option>Community Member</option>
              <option>Other</option>
            </select>
          </div>

          <div class="form-field">
            <label>Team(s) of Interest</label>
            <input type="text" name="teams" placeholder="e.g. Heliotech, Scioly, Aero..." />
          </div>

          <div class="form-field">
            <label>Anything Else?</label>
            <textarea name="message" placeholder="Tell us about yourself or any questions you have..." rows="4"></textarea>
          </div>

          <div class="form-footer">
            <button type="submit" class="btn btn-primary">Submit Interest Form</button>
            <p class="form-note">
              Connect to <a href="https://formspree.io" target="_blank">Formspree</a> to enable email delivery.
            </p>
          </div>
        </form>

      </div>
    </div>
  </section>

</Layout>


<script>
  // Tab switching
  const tabBtns = document.querySelectorAll('.tab-btn');
  const tabPanels = document.querySelectorAll('.tab-panel');

  tabBtns.forEach((btn) => {
    btn.addEventListener('click', () => {
      const target = btn.dataset.tab;
      tabBtns.forEach((b) => b.classList.remove('active'));
      tabPanels.forEach((p) => p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(`tab-${target}`)?.classList.add('active');
    });
  });
</script>


<style>
  /* ── Tabs ── */
  .tab-bar { display: flex; gap: 10px; margin-bottom: 56px; }

  .tab-btn {
    font-family: var(--font-display);
    font-size: 0.64rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-weight: 600;
    padding: 11px 26px;
    border-radius: var(--radius);
    border: 1.5px solid var(--border-med);
    color: var(--text-muted);
    background: transparent;
    transition: all 0.22s ease;
    cursor: pointer;
  }
  .tab-btn.active {
    background: var(--navy);
    border-color: var(--navy);
    color: var(--text-on-dark);
    box-shadow: var(--shadow-sm);
  }
  .tab-btn:not(.active):hover {
    border-color: var(--border-strong);
    color: var(--ink);
  }

  .tab-panel { display: none; }
  .tab-panel.active { display: block; }

  /* ── Layout ── */
  .two-col-wide {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 64px;
    align-items: start;
  }

  /* ── Steps ── */
  .atlas-steps { 
    display: flex; 
    flex-direction: column; 
    justify-content: flex-start; 
    align-items: flex-start;
    gap: 0; 
  }

  .atlas-step {
    display: flex;
    align-items: flex-start; 
    gap: 24px; 
    position: relative;
    padding-bottom: 28px; /* REDUCED from 56px to tighten the gap between steps */
    width: 100%;
  }

  /* The Line */
  .has-connector::before {
    content: '';
    position: absolute;
    left: 18px; 
    top: 44px; /* STARTS with a 6px gap below the circle (38px height + 6px gap) */
    bottom: 6px; /* ENDS 6px before the next circle starts to prevent X-ray overlap */
    width: 2px;
    background: var(--border-med);
    z-index: 0;
  }

  .atlas-step-num {
    font-family: var(--font-display);
    font-size: 0.65rem;
    font-weight: 700;
    letter-spacing: 0.1em;
    width: 38px;
    height: 38px;
    box-sizing: border-box; /* Crucial: stops the border from mutating the width */
    border-radius: 50%;
    border: 1.5px solid var(--border-med);
    color: var(--text-muted);
    background: var(--bg-1); 
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    position: relative;
    z-index: 1;
  }

  .atlas-step-num-final {
    background: var(--navy);
    color: #fff;
    border-color: var(--navy);
  }

  .atlas-step-body { 
    padding-top: 6px; 
  }

  .atlas-step-title {
    font-family: var(--font-display);
    font-size: 0.95rem;
    font-weight: 700;
    letter-spacing: 0.02em;
    margin-bottom: 6px;
    color: var(--ink);
  }

  .atlas-step-desc { 
    color: var(--text-muted); 
    font-size: 0.88rem; 
    line-height: 1.6; 
    max-width: 400px; 
  }

  /* ── Benefits ── */
  .benefits { 
    display: flex; 
    flex-direction: column; 
    gap: 20px; 
    align-self: flex-start; 
  }
  .benefit-title {
    font-family: var(--font-display);
    font-size: 0.84rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    margin-bottom: 8px;
  }
  .benefit-desc { color: var(--text-muted); font-size: 0.88rem; line-height: 1.7; }

  /* ── Family bullets ── */
  .family-bullets {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 14px;
    margin-bottom: 36px;
    padding: 0;
  }
  .family-bullets li { display: flex; align-items: flex-start; gap: 12px; }
  .bullet-dot {
    width: 5px; height: 5px;
    border-radius: 50%;
    background: var(--green);
    margin-top: 9px;
    flex-shrink: 0;
  }
  .family-bullets p { color: var(--text-muted); font-size: 0.95rem; line-height: 1.7; }

  /* ── Family cards ── */
  .family-cards { display: flex; flex-direction: column; gap: 20px; }
  .card-label {
    font-family: var(--font-display);
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 0.06em;
    margin-bottom: 18px;
    color: var(--text-dim);
  }

  .district-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  .district-stat-value {
    font-family: var(--font-display);
    font-size: 1.8rem;
    font-weight: 800;
    letter-spacing: -0.03em;
  }
  .district-stat-label { font-size: 0.76rem; color: var(--text-dim); margin-top: 2px; }

  /* ── FAQ ── */
  .faq-list { display: flex; flex-direction: column; gap: 0; }
  .faq-item { border-top: 1px solid var(--border); padding-top: 16px; margin-top: 16px; }
  .faq-q { font-size: 0.86rem; color: var(--ink); font-weight: 500; margin-bottom: 3px; }
  .faq-a { font-size: 0.82rem; color: var(--text-muted); }

  /* ── Form ── */
  .form-wrap { max-width: 660px; margin: 0 auto; }

  form {
    display: flex;
    flex-direction: column;
    gap: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 40px;
    box-shadow: var(--shadow-md);
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .form-field { display: flex; flex-direction: column; }

  label {
    display: block;
    font-family: var(--font-display);
    font-size: 0.54rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 8px;
  }

  input, select, textarea {
    width: 100%;
    background: var(--bg-card);
    border: 1.5px solid var(--border-med);
    border-radius: var(--radius);
    padding: 12px 16px;
    color: var(--text);
    font-family: var(--font-body);
    font-size: 0.95rem;
    outline: none;
    transition: border-color 0.22s ease, box-shadow 0.22s ease;
    box-sizing: border-box;
  }
  input:focus, select:focus, textarea:focus {
    border-color: var(--navy);
    box-shadow: 0 0 0 3px rgba(27,42,74,0.08);
  }
  select { cursor: pointer; }
  textarea { resize: vertical; }

  .form-footer {
    display: flex;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  .form-note {
    font-size: 0.75rem;
    color: var(--text-dim);
  }
  .form-note a {
    color: var(--navy);
    text-decoration: underline;
  }

  /* ── Responsive ── */
  @media (max-width: 900px) {
    .two-col-wide { grid-template-columns: 1fr; gap: 48px; }
  }

  @media (max-width: 640px) {
    .tab-bar { flex-direction: column; gap: 8px; }
    .tab-btn { width: 100%; text-align: center; }
    .form-row { grid-template-columns: 1fr; gap: 0; }
    form { padding: 28px 20px; }
    .family-cards { gap: 16px; }
    .district-stats { grid-template-columns: 1fr 1fr; gap: 16px; }
    .form-footer { flex-direction: column; align-items: flex-start; gap: 12px; }
    .benefits { gap: 16px; }
  }
</style>
